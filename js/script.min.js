$(document).ready(function(){var r=1,c=0,o=0,n=0,_="",y="",s=0,l=0,h="",f="";function u(){$.ajax({url:"https://exmax.store/tarifs/api/Truck/",data:{way_fromID:s,way_toID:l},type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);if(1!=t[0]){for(var a=t[2],n=0;n<a.length;n++){var i=a[n],r="";r+='<div class="row search__col" style="padding: 0rem 0.5rem 0.75rem;">',r+='<div class="col-md-4 search__img">',r+="<picture>",r+='<source srcset="img/cars/mini/webp/pickup.webp" type="image/webp">',r+='<source srcset="img/cars/mini/pickup_@2x.jpg 2x" type="image/jpg">',r+='<img src="img/cars/mini/pickup.jpg" type="image/jpg" alt="Пикап">',r+="</picture>",r+="</div>",r+='<div class="col-md-5 search__detailBox">',r+='<div class="detailTitle">Пикап</div>',r+="<p>Новые комфортные авто 2017 года! Заказать такси можно по номеру +66945800333 WhatsApp Viber.</p>",r+="<p>Максимум <strong>4 человек</strong> в автомобиле</p>",r+="</div>",r+='<div class="col-md-3 search__detailPrice">',r+='<div class="currencyBlock">',r+="<p>"+i[1]+" THB</p>",r+="<p>"+T(i[1],"USD")+" USD | "+T(i[1],"RUR")+" RUB</p>",r+="</div>",r+="<p>за транспортное средство</p>",r+='<input class="detailBtn" type="button" id="order_taxi_truck" value="ВЫБРАТЬ">',r+="<div class=\"search__social\" style='margin-top: 0.5em;'>",r+="<p>Заказать через:</p>",r+='<a href="view/social/whatsupp/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('whatsapp'); return true;\">",r+="<img src='img/svg/whatsApp_round.svg' alt='whatsapp'>",r+="</a>",r+='<a href="view/social/viber/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('viber'); return true;\">",r+="<img src='img/svg/viber_round.svg' alt='viber'>",r+="</a>",r+='<a href="view/social/telegramm/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('telegram'); return true;\">",r+="<img src='img/svg/telegram_round.svg' alt='telegram'>",r+="</a>",r+="</div>",r+="</div>",r+="</div>",$("#cars_choice").append(r),$("#order_taxi_truck").on("click",function(){B("Пикап",i[1])})}$("#cars_choice").css("display","block"),$("html, body").animate({scrollTop:$("#form_search").offset().top},700)}else DEBUG&&console.log("error: "+t[1])},error:function(e){console.log("ERROR \n"),console.log(e),$("#cars_choice").css("display","block")}})}$(function(){$('input[type="phone"]').inputmask({alias:"phone",clearIncomplete:!0})}),scr_h=window.innerHeight,scr_w=window.innerWidth,$("body").css({"min-height":scr_h,"max-width":scr_w}),$("body").flowtype({minimum:320,maximum:1920,minFont:10,maxFont:16}),$("#search_submit").on("click",function(e){0!=s&&0!=l?s!=l?($.ajax({url:"https://exmax.store/tarifs/api/Car/",data:{way_fromID:s,way_toID:l},type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);if(1!=t[0]){var a=t[2];$("#cars_choice").empty();for(var n=0;n<a.length;n++){var i=a[n],r="";r+='<div class="row search__col" style="padding: 0rem 0.5rem 0.75rem;">',r+='<div class="col-md-4 search__img">',r+="<picture>",r+='<source srcset="img/cars/mini/webp/vios.webp" type="image/webp">',r+='<source srcset="img/cars/mini/vios_@2x.jpg 2x" type="image/jpg">',r+='<img src="img/cars/mini/vios.jpg" type="image/jpg" alt="Седан Эконом">',r+="</picture>",r+="</div>",r+='<div class="col-md-5 search__detailBox">',r+='<div class="detailTitle">Седан Эконом</div>',r+="<p>Новые комфортные авто 2017 года! Заказать такси можно по номеру +66945800333 WhatsApp Viber.</p>",r+="<p>Максимум <strong>4 человека</strong> в автомобиле</p>",r+="</div>",r+='<div class="col-md-3 search__detailPrice">',r+='<div class="currencyBlock">',r+="<p>"+i[1]+" THB</p>",r+="<p>"+T(i[1],"USD")+" USD | "+T(i[1],"RUR")+" RUB</p>",r+="</div>",r+="<p>за транспортное средство</p>",r+='<input class="detailBtn" type="button" id="order_taxi_car" value="ВЫБРАТЬ">',r+="<div class=\"search__social\" style='margin-top: 0.5em;'>",r+="<p>Заказать через:</p>",r+='<a href="view/social/whatsupp/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('whatsapp'); return true;\">",r+="<img src='img/svg/whatsApp_round.svg' alt='whatsapp'>",r+="</a>",r+='<a href="view/social/viber/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('viber'); return true;\">",r+="<img src='img/svg/viber_round.svg' alt='viber'>",r+="</a>",r+='<a href="view/social/telegramm/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('telegram'); return true;\">",r+="<img src='img/svg/telegram_round.svg' alt='telegram'>",r+="</a>",r+="</div>",r+="</div>",r+="</div>",$("#cars_choice").append(r),$("#order_taxi_car").on("click",function(){B("Седан Эконом",i[1])})}$.ajax({url:"https://exmax.store/tarifs/api/Minivan/",data:{way_fromID:s,way_toID:l},type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);if(1!=t[0]){for(var a=t[2],n=0;n<a.length;n++){var i=a[n],r="";r+='<div class="row search__col" style="padding: 0rem 0.5rem 0.75rem;">',r+='<div class="col-md-4 search__img">',r+="<picture>",r+='<source srcset="img/cars/mini/webp/minivan.webp" type="image/webp">',r+='<source srcset="img/cars/mini/minivan_@2x.jpg 2x" type="image/jpg">',r+='<img src="img/cars/mini/minivan.jpg" type="image/jpg" alt="Минивен">',r+="</picture>",r+="</div>",r+='<div class="col-md-5 search__detailBox">',r+='<div class="detailTitle">Минивен</div>',r+="<p>Новые комфортные авто 2017 года! Заказать такси можно по номеру +66945800333 WhatsApp Viber.</p>",r+="<p>Максимум <strong>9 человек</strong> в автомобиле</p>",r+="</div>",r+='<div class="col-md-3 search__detailPrice">',r+='<div class="currencyBlock">',r+="<p>"+i[1]+" THB</p>",r+="<p>"+T(i[1],"USD")+" USD | "+T(i[1],"RUR")+" RUB</p>",r+="</div>",r+="<p>за транспортное средство</p>",r+='<input class="detailBtn" type="button" id="order_taxi_minivan" value="ВЫБРАТЬ">',r+="<div class=\"search__social\" style='margin-top: 0.5em;'>",r+="<p>Заказать через:</p>",r+='<a href="view/social/whatsupp/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('whatsapp'); return true;\">",r+="<img src='img/svg/whatsApp_round.svg' alt='whatsapp'>",r+="</a>",r+='<a href="view/social/viber/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('viber'); return true;\">",r+="<img src='img/svg/viber_round.svg' alt='viber'>",r+="</a>",r+='<a href="view/social/telegramm/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('telegram'); return true;\">",r+="<img src='img/svg/telegram_round.svg' alt='telegram'>",r+="</a>",r+="</div>",r+="</div>",r+="</div>",$("#cars_choice").append(r),$("#order_taxi_minivan").on("click",function(){B("Минивен",i[1])})}$.ajax({url:"https://exmax.store/tarifs/api/VipMinivan/",data:{way_fromID:s,way_toID:l},type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);if(1!=t[0]){for(var a=t[2],n=0;n<a.length;n++){var i=a[n],r="";r+='<div class="row search__col" style="padding: 0rem 0.5rem 0.75rem;">',r+='<div class="col-md-4 search__img">',r+="<picture>",r+='<source srcset="img/cars/mini/webp/vip_minivan.webp" type="image/webp">',r+='<source srcset="img/cars/mini/vip_minivan_@2x.jpg 2x" type="image/jpg">',r+='<img src="img/cars/mini/vip_minivan.jpg" type="image/jpg" alt="Vip Минивен">',r+="</picture>",r+="</div>",r+='<div class="col-md-5 search__detailBox">',r+='<div class="detailTitle">Vip Минивен</div>',r+="<p>Новые комфортные авто 2017 года! Заказать такси можно по номеру +66945800333 WhatsApp Viber.</p>",r+="<p>Максимум <strong>7 человек</strong> в автомобиле</p>",r+="</div>",r+='<div class="col-md-3 search__detailPrice">',r+='<div class="currencyBlock">',r+="<p>"+i[1]+" THB</p>",r+="<p>"+T(i[1],"USD")+" USD | "+T(i[1],"RUR")+" RUB</p>",r+="</div>",r+="<p>за транспортное средство</p>",r+='<input class="detailBtn" type="button" id="order_taxi_vip_minivan" value="ВЫБРАТЬ">',r+="<div class=\"search__social\" style='margin-top: 0.5em;'>",r+="<p>Заказать через:</p>",r+='<a href="view/social/whatsupp/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('whatsapp'); return true;\">",r+="<img src='img/svg/whatsApp_round.svg' alt='whatsapp'>",r+="</a>",r+='<a href="view/social/viber/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('viber'); return true;\">",r+="<img src='img/svg/viber_round.svg' alt='viber'>",r+="</a>",r+='<a href="view/social/telegramm/" target="_blank"',r+="onclick=\"yaCounter51784160.reachGoal('telegram'); return true;\">",r+="<img src='img/svg/telegram_round.svg' alt='telegram'>",r+="</a>",r+="</div>",r+="</div>",r+="</div>",$("#cars_choice").append(r),$("#order_taxi_vip_minivan").on("click",function(){B("Vip Минивен",i[1])})}u()}else DEBUG&&console.log("error: "+t[1])},error:function(e){console.log("ERROR \n"),console.log(e)}})}else DEBUG&&console.log("error: "+t[1])},error:function(e){console.log("ERROR \n"),console.log(e),$("#cars_choice").css("display","block")}})}else DEBUG&&console.log("error: "+t[1])},error:function(e){console.log("ERROR \n"),console.log(e)}}),k()):swal({type:"error",title:"Маршрут совпадает, пожалуйста выберите маршрут из выпадающего списка.",showConfirmButton:!1,timer:2500}):swal({type:"error",title:"Не выбран маршрут, пожалуйста выберите маршрут из выпадающего списка.",showConfirmButton:!1,timer:2500})}),$.ajax({url:"https://exmax.store/tarifs/api/Currency/",async:!0,type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);0==t[0]&&(r=t[2],$.ajax({async:!0,url:"php/curse.php",type:"POST",dataType:"html",success:function(e){var a=0,n=0,i=0;jQuery(e).find("Cube").each(function(){var e=jQuery(this).attr("currency"),t=jQuery(this).attr("rate");"RUB"==e&&(a=t),"THB"==e&&(n=t),"USD"==e&&(i=t)}),c=a/n,c*=r,o=i/n,o*=r,null!=document.getElementById("summ")&&m(0)},error:function(e){console.log(e)}}))}}),setInterval(function(){$("#animate_btn").addClass("animateBtn"),setTimeout(function(){$("#animate_btn").removeClass("animateBtn")},1500)},6e3);var t=$("#date_input");t.on("change",function(e){document.getElementById("date").innerHTML=t.val()});var a=$("#round_date_input");a.on("change",function(e){document.getElementById("round_date").innerHTML=a.val()});var i=$("#name_input");i.on("keyup",function(e){document.getElementById("name").innerHTML=i.val()});var d=$("#phone_input");d.on("keyup",function(e){document.getElementById("phone").innerHTML=d.val()});var p=$("#email_input");p.on("keyup",function(e){document.getElementById("email").innerHTML=p.val()}),$("#agreePolicy").on("click",function(e){}),$("#round_input").on("click",function(){if($("#round_input").prop("checked")){$("#round_date_cont").fadeIn(),$("#round_cont").fadeIn(),document.getElementById("round_from").innerHTML=document.getElementById("to").innerHTML,document.getElementById("round_to").innerHTML=document.getElementById("from").innerHTML,$("#round_price").fadeIn();var e=parseInt(document.getElementById("amount").innerHTML);document.getElementById("round_amount").innerHTML=e+" THB",m(e)}else{$("#round_date_cont").fadeOut(),$("#round_cont").fadeOut(),$("#round_price").fadeOut(),m(e=-1*parseInt(document.getElementById("amount").innerHTML))}});try{$("#date_input").datetimepicker({format:"dd.mm.yyyy hh:ii",autoclose:!0,startDate:new Date,todayBtn:!0,todayHighlight:!0,language:"ru",minuteStep:10}),$("#date_input").datetimepicker().on("changeDate",function(e){var t=$("#date_input").val();$("#round_date_input").datetimepicker("setStartDate",t),$("#round_date_input").val("")}),$("#round_date_input").datetimepicker({format:"dd.mm.yyyy hh:ii",autoclose:!0,todayBtn:!0,todayHighlight:!0,language:"ru",minuteStep:10})}catch(e){}function m(e){var t=parseInt(document.getElementById("summ").innerHTML);document.getElementById("price_input").value=t+e+" THB",document.getElementById("summ").innerHTML=t+e+" THB",document.getElementById("summ_other").innerHTML=T(t+e,"USD")+" USD | "+T(t+e,"RUR")+" RUB"}var g=$("#taxi_from_input");$("#taxi_from_list").on("click",function(e){"LI"==e.target.tagName&&(s=e.target.getAttribute("data-id"),_=e.target.getAttribute("data-title"),e.target.getAttribute("data-key").includes("Аэропорт")&&(h="Air"),g.val(e.target.innerHTML),k())}),g.on("click",function(e){"block"!=$("#taxi_from").css("display")?(k(),w("","from")):k()}),g.on("keydown",function(e){13===e.keyCode&&e.preventDefault()}),g.on("keyup",function(e){13===e.keyCode&&e.preventDefault(),w(g.val(),"from")});var v=$("#taxi_to_input");function b(){var e,t=parseInt(document.getElementById("adult_count").innerHTML),a=parseInt(document.getElementById("child_count").innerHTML);n=t+a,document.getElementById("all_count").innerHTML=n,document.getElementById("all_text").innerHTML=(e=n,cases=[2,0,1,1,1,2],["пассажир","пассажира","пассажиров"][4<e%100&&e%100<20?2:cases[e%10<5?e%10:5]])}function k(){$("#taxi_from").css("display","none"),$("#taxi_to").css("display","none"),$("#mini_modal").css("display","none"),$("#main_menu_drop").css("display","none")}function B(e,t){var a=e,n=(t=t,document.getElementById("all_count").innerHTML+" "+document.getElementById("all_text").innerHTML),i=document.getElementById("adult_count").innerHTML,r=document.getElementById("child_count").innerHTML,c=document.createElement("form");c.setAttribute("method","post"),c.setAttribute("action","view/orders.php");var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","auto"),o.setAttribute("value",a);var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","amount"),s.setAttribute("value",t);var l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name","from"),l.setAttribute("value",_);var u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name","to"),u.setAttribute("value",y);var d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name","passengers"),d.setAttribute("value",n);var p=document.createElement("input");p.setAttribute("type","hidden"),p.setAttribute("name","from_key"),p.setAttribute("value",h);var m=document.createElement("input");m.setAttribute("type","hidden"),m.setAttribute("name","to_key"),m.setAttribute("value",f);var g=document.createElement("input");g.setAttribute("type","hidden"),g.setAttribute("name","adult"),g.setAttribute("value",i);var v=document.createElement("input");v.setAttribute("type","hidden"),v.setAttribute("name","child"),v.setAttribute("value",r),c.appendChild(o),c.appendChild(s),c.appendChild(l),c.appendChild(u),c.appendChild(d),c.appendChild(p),c.appendChild(m),c.appendChild(g),c.appendChild(v),document.body.appendChild(c),c.submit()}function w(e,c){$.ajax({url:"https://exmax.store/tarifs/api/Ways/",data:{search:e},type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);if(1!=t[0]){var a=t[2];$("#taxi_"+c+"_list").empty();for(var n=0;n<a.length;n++){var i=a[n],r="";r+='<li data-id="'+i[0]+'" data-title ="'+i[1]+'" data-key="'+i[2]+'">'+i[1]+"</li>",$("#taxi_"+c+"_list").append(r)}$("#taxi_"+c).css("display","block")}else DEBUG&&console.log("error: "+t[1])},error:function(e){console.log("ERROR \n"),console.log(e)}})}function T(e,t){var a=Number(e);return"USD"==t&&(a*=o),"RUR"==t&&(a*=c),a.toFixed(0)}$("#taxi_to_list").on("click",function(e){"LI"==e.target.tagName&&(l=e.target.getAttribute("data-id"),y=e.target.getAttribute("data-title"),e.target.getAttribute("data-key").includes("Аэропорт")&&(f="Air"),v.val(e.target.innerHTML),k())}),v.on("click",function(e){"block"!=$("#taxi_to").css("display")?(k(),w("","to")):k()}),v.on("keydown",function(e){13===e.keyCode&&e.preventDefault()}),v.on("keyup",function(e){13===e.keyCode&&e.preventDefault(),w(v.val(),"to")}),$("#people_count").on("click",function(e){"none"==$("#mini_modal").css("display")?$("#mini_modal").css("display","block"):k()}),$("#adult_plus").on("click",function(e){var t=parseInt(document.getElementById("adult_count").innerHTML);t++,document.getElementById("adult_count").innerHTML=t,b()}),$("#adult_minus").on("click",function(e){var t=parseInt(document.getElementById("adult_count").innerHTML);1<t&&t--,document.getElementById("adult_count").innerHTML=t,b()}),$("#child_plus").on("click",function(e){var t=parseInt(document.getElementById("child_count").innerHTML);t++,document.getElementById("child_count").innerHTML=t,b()}),$("#child_minus").on("click",function(e){var t=parseInt(document.getElementById("child_count").innerHTML);0<t&&t--,document.getElementById("child_count").innerHTML=t,b()}),$(document).mouseup(function(e){var t=$("#form_search"),a=$("#main_menu_open");t.is(e.target)||0!==t.has(e.target).length||a.is(e.target)||0!==a.has(e.target).length||k()})});