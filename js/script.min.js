$(document).ready(function(){var r=1,c=0,o=0,i=0,y="",v="",d=0,s=0,h="",f="";function l(){$.ajax({url:"https://exmax.store/tarifs/api/Truck/",data:{way_fromID:d,way_toID:s},type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);if(1!=t[0]){for(var n=t[2],i=0;i<n.length;i++){var a=n[i],r="";r+='<div class="row search__col" style="padding: 0rem 0.5rem 0.75rem;">',r+='<div class="col-md-4 search__img">',r+="<picture>",r+='<source srcset="img/cars/mini/webp/pickup.webp" type="image/webp">',r+='<source srcset="img/cars/mini/pickup_@2x.jpg 2x" type="image/jpg">',r+='<img src="img/cars/mini/pickup.jpg" type="image/jpg" alt="Пикап">',r+="</picture>",r+="</div>",r+='<div class="col-md-5 search__detailBox">',r+='<div class="detailTitle">Пикап</div>',r+="<p>Новые комфортные авто 2017 года! Заказать такси можно по номеру +66945800333 WhatsApp Viber.</p>",r+="<p>Максимум <strong>4 человек</strong> в автомобиле</p>",r+="</div>",r+='<div class="col-md-3 search__detailPrice">',r+='<div class="currencyBlock">',r+="<p>"+a[1]+" THB</p>",r+="<p>"+x(a[1],"USD")+" USD | "+x(a[1],"RUR")+" RUB</p>",r+="</div>",r+="<p>за транспортное средство</p>",r+='<input class="detailBtn" type="button" id="order_taxi_truck" value="ВЫБРАТЬ">',r+="</div>",r+="</div>",$("#cars_choice").append(r),$("#order_taxi_truck").on("click",function(){T("Пикап",a[1])})}$("#cars_choice").css("display","block"),$("html, body").animate({scrollTop:$("#form_search").offset().top},700)}else DEBUG&&console.log("error: "+t[1])},error:function(e){console.log("ERROR \n"),console.log(e),$("#cars_choice").css("display","block")}})}$(function(){$('input[type="phone"]').inputmask({alias:"phone",clearIncomplete:!0})}),scr_h=window.innerHeight,scr_w=window.innerWidth,$("body").css({"min-height":scr_h,"max-width":scr_w}),$("body").flowtype({minimum:320,maximum:1920,minFont:10,maxFont:16}),$("#search_submit").on("click",function(e){0!=d&&0!=s?d!=s?($.ajax({url:"https://exmax.store/tarifs/api/Car/",data:{way_fromID:d,way_toID:s},type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);if(1!=t[0]){var n=t[2];$("#cars_choice").empty();for(var i=0;i<n.length;i++){var a=n[i],r="";r+='<div class="row search__col" style="padding: 0rem 0.5rem 0.75rem;">',r+='<div class="col-md-4 search__img">',r+="<picture>",r+='<source srcset="img/cars/mini/webp/vios.webp" type="image/webp">',r+='<source srcset="img/cars/mini/vios_@2x.jpg 2x" type="image/jpg">',r+='<img src="img/cars/mini/vios.jpg" type="image/jpg" alt="Седан Эконом">',r+="</picture>",r+="</div>",r+='<div class="col-md-5 search__detailBox">',r+='<div class="detailTitle">Седан Эконом</div>',r+="<p>Новые комфортные авто 2017 года! Заказать такси можно по номеру +66945800333 WhatsApp Viber.</p>",r+="<p>Максимум <strong>4 человека</strong> в автомобиле</p>",r+="</div>",r+='<div class="col-md-3 search__detailPrice">',r+='<div class="currencyBlock">',r+="<p>"+a[1]+" THB</p>",r+="<p>"+x(a[1],"USD")+" USD | "+x(a[1],"RUR")+" RUB</p>",r+="</div>",r+="<p>за транспортное средство</p>",r+='<input class="detailBtn" type="button" id="order_taxi_car" value="ВЫБРАТЬ">',r+="</div>",r+="</div>",$("#cars_choice").append(r),$("#order_taxi_car").on("click",function(){T("Седан Эконом",a[1])})}$.ajax({url:"https://exmax.store/tarifs/api/Minivan/",data:{way_fromID:d,way_toID:s},type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);if(1!=t[0]){for(var n=t[2],i=0;i<n.length;i++){var a=n[i],r="";r+='<div class="row search__col" style="padding: 0rem 0.5rem 0.75rem;">',r+='<div class="col-md-4 search__img">',r+="<picture>",r+='<source srcset="img/cars/mini/webp/minivan.webp" type="image/webp">',r+='<source srcset="img/cars/mini/minivan_@2x.jpg 2x" type="image/jpg">',r+='<img src="img/cars/mini/minivan.jpg" type="image/jpg" alt="Минивен">',r+="</picture>",r+="</div>",r+='<div class="col-md-5 search__detailBox">',r+='<div class="detailTitle">Минивен</div>',r+="<p>Новые комфортные авто 2017 года! Заказать такси можно по номеру +66945800333 WhatsApp Viber.</p>",r+="<p>Максимум <strong>9 человек</strong> в автомобиле</p>",r+="</div>",r+='<div class="col-md-3 search__detailPrice">',r+='<div class="currencyBlock">',r+="<p>"+a[1]+" THB</p>",r+="<p>"+x(a[1],"USD")+" USD | "+x(a[1],"RUR")+" RUB</p>",r+="</div>",r+="<p>за транспортное средство</p>",r+='<input class="detailBtn" type="button" id="order_taxi_minivan" value="ВЫБРАТЬ">',r+="</div>",r+="</div>",$("#cars_choice").append(r),$("#order_taxi_minivan").on("click",function(){T("Минивен",a[1])})}$.ajax({url:"https://exmax.store/tarifs/api/VipMinivan/",data:{way_fromID:d,way_toID:s},type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);if(1!=t[0]){for(var n=t[2],i=0;i<n.length;i++){var a=n[i],r="";r+='<div class="row search__col" style="padding: 0rem 0.5rem 0.75rem;">',r+='<div class="col-md-4 search__img">',r+="<picture>",r+='<source srcset="img/cars/mini/webp/vip_minivan.webp" type="image/webp">',r+='<source srcset="img/cars/mini/vip_minivan_@2x.jpg 2x" type="image/jpg">',r+='<img src="img/cars/mini/vip_minivan.jpg" type="image/jpg" alt="Vip Минивен">',r+="</picture>",r+="</div>",r+='<div class="col-md-5 search__detailBox">',r+='<div class="detailTitle">Vip Минивен</div>',r+="<p>Новые комфортные авто 2017 года! Заказать такси можно по номеру +66945800333 WhatsApp Viber.</p>",r+="<p>Максимум <strong>7 человек</strong> в автомобиле</p>",r+="</div>",r+='<div class="col-md-3 search__detailPrice">',r+='<div class="currencyBlock">',r+="<p>"+a[1]+" THB</p>",r+="<p>"+x(a[1],"USD")+" USD | "+x(a[1],"RUR")+" RUB</p>",r+="</div>",r+="<p>за транспортное средство</p>",r+='<input class="detailBtn" type="button" id="order_taxi_vip_minivan" value="ВЫБРАТЬ">',r+="</div>",r+="</div>",$("#cars_choice").append(r),$("#order_taxi_vip_minivan").on("click",function(){T("Vip Минивен",a[1])})}l()}else DEBUG&&console.log("error: "+t[1])},error:function(e){console.log("ERROR \n"),console.log(e)}})}else DEBUG&&console.log("error: "+t[1])},error:function(e){console.log("ERROR \n"),console.log(e),$("#cars_choice").css("display","block")}})}else DEBUG&&console.log("error: "+t[1])},error:function(e){console.log("ERROR \n"),console.log(e)}}),B()):swal({type:"error",title:"Маршрут совпадает, пожалуйста выберите маршрут из выпадающего списка.",showConfirmButton:!1,timer:2500}):swal({type:"error",title:"Не выбран маршрут, пожалуйста выберите маршрут из выпадающего списка.",showConfirmButton:!1,timer:2500})}),$.ajax({url:"https://exmax.store/tarifs/api/Currency/",async:!0,type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);0==t[0]&&(r=t[2],$.ajax({async:!0,url:"php/curse.php",type:"POST",dataType:"html",success:function(e){var n=0,i=0,a=0;jQuery(e).find("Cube").each(function(){var e=jQuery(this).attr("currency"),t=jQuery(this).attr("rate");"RUB"==e&&(n=t),"THB"==e&&(i=t),"USD"==e&&(a=t)}),c=n/i,c*=r,o=a/i,o*=r,null!=document.getElementById("summ")&&m(0)},error:function(e){console.log(e)}}))}}),setInterval(function(){$("#animate_btn").addClass("animateBtn"),setTimeout(function(){$("#animate_btn").removeClass("animateBtn")},1500)},6e3);var t=$("#date_input");t.on("change",function(e){document.getElementById("date").innerHTML=t.val()});var n=$("#round_date_input");n.on("change",function(e){document.getElementById("round_date").innerHTML=n.val()});var a=$("#name_input");a.on("keyup",function(e){document.getElementById("name").innerHTML=a.val()});var u=$("#phone_input");u.on("keyup",function(e){document.getElementById("phone").innerHTML=u.val()});var p=$("#email_input");p.on("keyup",function(e){document.getElementById("email").innerHTML=p.val()}),$("#agreePolicy").on("click",function(e){}),$("#round_input").on("click",function(){if($("#round_input").prop("checked")){$("#round_date_cont").fadeIn(),$("#round_cont").fadeIn(),document.getElementById("round_from").innerHTML=document.getElementById("to").innerHTML,document.getElementById("round_to").innerHTML=document.getElementById("from").innerHTML,$("#round_price").fadeIn();var e=parseInt(document.getElementById("amount").innerHTML);document.getElementById("round_amount").innerHTML=e+" THB",m(e)}else{$("#round_date_cont").fadeOut(),$("#round_cont").fadeOut(),$("#round_price").fadeOut(),m(e=-1*parseInt(document.getElementById("amount").innerHTML))}});try{$("#date_input").datetimepicker({format:"dd.mm.yyyy hh:ii",autoclose:!0,startDate:new Date,todayBtn:!0,todayHighlight:!0,language:"ru",minuteStep:10}),$("#date_input").datetimepicker().on("changeDate",function(e){var t=$("#date_input").val();$("#round_date_input").datetimepicker("setStartDate",t),$("#round_date_input").val("")}),$("#round_date_input").datetimepicker({format:"dd.mm.yyyy hh:ii",autoclose:!0,todayBtn:!0,todayHighlight:!0,language:"ru",minuteStep:10})}catch(e){}function m(e){var t=parseInt(document.getElementById("summ").innerHTML);document.getElementById("price_input").value=t+e+" THB",document.getElementById("summ").innerHTML=t+e+" THB",document.getElementById("summ_other").innerHTML=x(t+e,"USD")+" USD | "+x(t+e,"RUR")+" RUB"}var _=$("#taxi_from_input");$("#taxi_from_list").on("click",function(e){"LI"==e.target.tagName&&(d=e.target.getAttribute("data-id"),y=e.target.getAttribute("data-title"),e.target.getAttribute("data-key").includes("Аэропорт")&&(h="Air"),_.val(e.target.innerHTML),B())}),_.on("click",function(e){"block"!=$("#taxi_from").css("display")?(B(),I("","from")):B()}),_.on("keydown",function(e){13===e.keyCode&&e.preventDefault()}),_.on("keyup",function(e){13===e.keyCode&&e.preventDefault(),I(_.val(),"from")});var g=$("#taxi_to_input");function b(){var e,t=parseInt(document.getElementById("adult_count").innerHTML),n=parseInt(document.getElementById("child_count").innerHTML);i=t+n,document.getElementById("all_count").innerHTML=i,document.getElementById("all_text").innerHTML=(e=i,cases=[2,0,1,1,1,2],["пассажир","пассажира","пассажиров"][4<e%100&&e%100<20?2:cases[e%10<5?e%10:5]])}function B(){$("#taxi_from").css("display","none"),$("#taxi_to").css("display","none"),$("#mini_modal").css("display","none"),$("#main_menu_drop").css("display","none")}function T(e,t){var n=e,i=(t=t,document.getElementById("all_count").innerHTML+" "+document.getElementById("all_text").innerHTML),a=document.getElementById("adult_count").innerHTML,r=document.getElementById("child_count").innerHTML,c=document.createElement("form");c.setAttribute("method","post"),c.setAttribute("action","view/orders.php");var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","auto"),o.setAttribute("value",n);var d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name","amount"),d.setAttribute("value",t);var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","from"),s.setAttribute("value",y);var l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name","to"),l.setAttribute("value",v);var u=document.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name","passengers"),u.setAttribute("value",i);var p=document.createElement("input");p.setAttribute("type","hidden"),p.setAttribute("name","from_key"),p.setAttribute("value",h);var m=document.createElement("input");m.setAttribute("type","hidden"),m.setAttribute("name","to_key"),m.setAttribute("value",f);var _=document.createElement("input");_.setAttribute("type","hidden"),_.setAttribute("name","adult"),_.setAttribute("value",a);var g=document.createElement("input");g.setAttribute("type","hidden"),g.setAttribute("name","child"),g.setAttribute("value",r),c.appendChild(o),c.appendChild(d),c.appendChild(s),c.appendChild(l),c.appendChild(u),c.appendChild(p),c.appendChild(m),c.appendChild(_),c.appendChild(g),document.body.appendChild(c),c.submit()}function I(e,c){$.ajax({url:"https://exmax.store/tarifs/api/Ways/",data:{search:e},type:"POST",dataType:"html",success:function(e){var t=$.parseJSON(e);if(1!=t[0]){var n=t[2];$("#taxi_"+c+"_list").empty();for(var i=0;i<n.length;i++){var a=n[i],r="";r+='<li data-id="'+a[0]+'" data-title ="'+a[1]+'" data-key="'+a[2]+'">'+a[1]+"</li>",$("#taxi_"+c+"_list").append(r)}$("#taxi_"+c).css("display","block")}else DEBUG&&console.log("error: "+t[1])},error:function(e){console.log("ERROR \n"),console.log(e)}})}function x(e,t){var n=Number(e);return"USD"==t&&(n*=o),"RUR"==t&&(n*=c),n.toFixed(0)}$("#taxi_to_list").on("click",function(e){"LI"==e.target.tagName&&(s=e.target.getAttribute("data-id"),v=e.target.getAttribute("data-title"),e.target.getAttribute("data-key").includes("Аэропорт")&&(f="Air"),g.val(e.target.innerHTML),B())}),g.on("click",function(e){"block"!=$("#taxi_to").css("display")?(B(),I("","to")):B()}),g.on("keydown",function(e){13===e.keyCode&&e.preventDefault()}),g.on("keyup",function(e){13===e.keyCode&&e.preventDefault(),I(g.val(),"to")}),$("#people_count").on("click",function(e){"none"==$("#mini_modal").css("display")?$("#mini_modal").css("display","block"):B()}),$("#adult_plus").on("click",function(e){var t=parseInt(document.getElementById("adult_count").innerHTML);t++,document.getElementById("adult_count").innerHTML=t,b()}),$("#adult_minus").on("click",function(e){var t=parseInt(document.getElementById("adult_count").innerHTML);1<t&&t--,document.getElementById("adult_count").innerHTML=t,b()}),$("#child_plus").on("click",function(e){var t=parseInt(document.getElementById("child_count").innerHTML);t++,document.getElementById("child_count").innerHTML=t,b()}),$("#child_minus").on("click",function(e){var t=parseInt(document.getElementById("child_count").innerHTML);0<t&&t--,document.getElementById("child_count").innerHTML=t,b()}),$(document).mouseup(function(e){var t=$("#form_search"),n=$("#main_menu_open");t.is(e.target)||0!==t.has(e.target).length||n.is(e.target)||0!==n.has(e.target).length||B()})});